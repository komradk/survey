    /* Global Styles */
        :root {
            /* CSS Variables for Theming - Default Values */
            --survey-font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            --survey-question-font-size: 16px;
            --survey-question-color: #2c3e50;
            --survey-input-bg: #ffffff;
            --survey-input-border: #e0e0e0;
            --survey-page-bg: #ffffff;
            --survey-button-bg: #3498db;
            --survey-button-text: #ffffff;
            --survey-border-color: #3498db;
            --survey-accent-border-width: 4px;
            --survey-container-width: 800px;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: var(--survey-font-family); background: #f5f7fa; color: #2c3e50; }
        .rtl { direction: rtl; }
        .ltr { direction: ltr; }
        .demo-container { display: flex; height: 100vh; gap: 20px; padding: 20px; }
        .demo-panel { flex: 1; background: white; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); overflow: hidden; display: flex; flex-direction: column; }
        .panel-header { background: #3498db; color: white; padding: 20px; text-align: center; }
        .panel-content { flex: 1; overflow: auto; background: #f5f7fa; }
        
        /* Creator Styles */
        .creator-container { display: flex; height: 100%; background: #fff; }
        .toolbox { 
            width: 250px; 
            background: #f8f9fa; 
            border-right: 2px solid #e9ecef; 
            padding: 20px; 
            overflow-y: auto; 
            position: sticky; /* Make toolbox sticky */
            top: 20px; /* Stick 20px from the top */
            align-self: flex-start; /* Prevent stretching in flex container */
            max-height: calc(100vh - 180px); /* Ensure it scrolls if taller than viewport */
        }
        .toolbox h3 { margin-bottom: 15px; color: #495057; font-size: 16px; }
        .field-item { background: white; border: 2px solid #dee2e6; border-radius: 8px; padding: 12px; margin-bottom: 10px; cursor: grab; transition: all 0.3s ease; display: flex; align-items: center; gap: 10px; }
        .field-item:hover { border-color: #3498db; box-shadow: 0 2px 8px rgba(52,152,219,0.2); }
        .field-item:active { cursor: grabbing; }
        .field-icon { width: 20px; height: 20px; background: #3498db; border-radius: 4px; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; }
        .field-label { font-weight: 500; color: #495057; }
        .design-area { flex: 1; padding: 20px; overflow-y: auto; position: relative; }
        .drop-zone { min-height: 400px; border: 2px dashed #dee2e6; border-radius: 12px; display: flex; align-items: center; justify-content: center; color: #6c757d; font-size: 18px; transition: all 0.3s ease; }
        .drop-zone.drag-over { border-color: #3498db; background: #f8f9fa; }
        .survey-field { background: white; border: 2px solid #e9ecef; border-radius: 8px; padding: 20px; margin-bottom: 15px; position: relative; transition: all 0.3s ease; }
        .survey-field:hover { border-color: #3498db; box-shadow: 0 2px 8px rgba(52,152,219,0.1); }
        .panel-container-creator { display: flex; gap: 10px; padding: 10px; background: #f8f9fa; border-radius: 6px; }
        .panel-container-creator .survey-question { flex: 1; min-width: 100px; border: 1px solid #dee2e6; }
        .survey-field.selected { border-color: #3498db; box-shadow: 0 0 0 3px rgba(52,152,219,0.1); }
        
        .survey-field.is-dragging { opacity: 0.5; border-style: dashed; }
        .survey-field.drag-over-top { border-top: 3px solid #3498db; }
        .survey-field.drag-over-bottom { border-bottom: 3px solid #3498db; }

        .field-controls { position: absolute; top: 10px; right: 10px; display: flex; gap: 5px; opacity: 0; transition: opacity 0.3s ease; z-index: 10; }
        .rtl .field-controls { right: auto; left: 10px; }
        .survey-field:hover .field-controls { opacity: 1; }
        .control-btn { width: 28px; height: 28px; border: none; border-radius: 4px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 12px; transition: all 0.3s ease; }
        .edit-btn { background: #f39c12; color: white; }
        .delete-btn { background: #e74c3c; color: white; }
        .control-btn:hover { transform: scale(1.1); }
        .property-group { margin-bottom: 20px; }
        .property-group-title { font-weight: bold; color: #34495e; padding-bottom: 8px; margin-bottom: 15px; border-bottom: 2px solid #e9ecef; }
        .property-label { display: block; margin-bottom: 5px; font-weight: 500; color: #495057; }
        .property-input, .property-select { width: 100%; padding: 8px 12px; border: 1px solid #ced4da; border-radius: 6px; font-size: 14px; }
        .property-checkbox { margin-right: 8px; }
        .rtl .property-checkbox { margin-left: 8px; margin-right: 0; }
        .choices-editor, .panel-editor, .qa-editor { border: 1px solid #ced4da; border-radius: 6px; padding: 10px; background: white; }
        .choice-item, .panel-item, .qa-item { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; padding: 8px; background: #f8f9fa; border-radius: 4px; flex-wrap: wrap; }
        .panel-item > span, .qa-item > label { font-weight: 500; flex-basis: 100%; padding-bottom: 5px; }
        .panel-item-controls { display: flex; gap: 5px; flex-basis: 100%; justify-content: flex-end; margin-top: 5px; }
        .edit-panel-item-btn { background-color: #3498db; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px; }
        .choice-input, .qa-input { flex: 1; padding: 6px 10px; border: 1px solid #ced4da; border-radius: 4px; font-size: 13px; }
        .remove-choice, .remove-panel-item, .remove-qa { background: #e74c3c; color: white; border: none; border-radius: 3px; width: 24px; height: 24px; cursor: pointer; font-size: 12px; margin-left: auto; }
        .rtl .remove-choice, .rtl .remove-panel-item, .rtl .remove-qa { margin-left: 0; margin-right: auto; }
        .add-choice, .add-panel-item, .add-qa { background: #28a745; color: white; border: none; border-radius: 4px; padding: 8px 12px; cursor: pointer; font-size: 13px; margin-top: 8px; }
        
        /* Viewer Styles */
        .viewer-wrapper { padding: 20px; height: 100%; box-sizing: border-box; }
        .viewer-container { max-width: var(--survey-container-width); margin: 0 auto; background: var(--survey-page-bg); border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); padding: 20px; }
        .survey-header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #f0f0f0; }
        .survey-title { font-size: 28px; font-weight: 700; color: var(--survey-question-color); margin: 0 0 10px 0; }
        .survey-description { font-size: 16px; color: #7f8c8d; line-height: 1.5; margin: 0; }
        .survey-question, .survey-panel { margin-bottom: 25px; padding: 20px; background: #f8f9fa; border-radius: 10px; border-left: var(--survey-accent-border-width) solid var(--survey-border-color); transition: all 0.4s ease; }
        .rtl .survey-question, .rtl .survey-panel { border-left: none; border-right: var(--survey-accent-border-width) solid var(--survey-border-color); }
        .survey-question.hidden, .survey-panel.hidden { opacity: 0; transform: scale(0.95); height: 0 !important; padding: 0 !important; margin: 0 !important; overflow: hidden; border: none; }
        .survey-panel-container { display: flex; flex-wrap: wrap; gap: 15px; }
        .survey-panel-container .survey-question { flex: 1; min-width: 150px; padding: 0; background: none; border: none; margin-bottom: 0; }
        .question-title { font-size: var(--survey-question-font-size); font-weight: 600; color: var(--survey-question-color); margin: 0 0 10px 0; line-height: 1.4; }
        .question-required { color: #e74c3c; font-weight: bold; }
        .question-description { font-size: 14px; color: #7f8c8d; margin-bottom: 15px; line-height: 1.4; }
        .form-input, .form-select { width: 100%; padding: 12px 16px; border: 2px solid var(--survey-input-border); background-color: var(--survey-input-bg); border-radius: 8px; font-size: 14px; transition: border-color 0.3s ease; color: var(--survey-question-color); }
        .form-input:focus, .form-select:focus { outline: none; border-color: var(--survey-border-color); }
        .form-file-input { border: 2px dashed var(--survey-input-border); padding: 20px; text-align: center; cursor: pointer; }
        .form-file-input:hover { border-color: var(--survey-border-color); }
        .form-textarea { min-height: 80px; resize: vertical; font-family: inherit; }
        .radio-group, .checkbox-group { display: flex; flex-direction: column; gap: 8px; }
        .option-item { display: flex; align-items: center; padding: 10px; background: var(--survey-input-bg); border: 1px solid var(--survey-input-border); border-radius: 6px; cursor: pointer; transition: all 0.3s ease; }
        .option-item:hover { border-color: var(--survey-border-color); }
        .option-input { margin-right: 10px; }
        .rtl .option-input { margin-right: 0; margin-left: 10px; }
        .rating-scale { display: flex; gap: 8px; flex-wrap: wrap; }
        .rating-item { width: 40px; height: 40px; border: 2px solid var(--survey-input-border); border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; font-weight: 600; transition: all 0.3s ease; }
        .rating-item:hover { border-color: var(--survey-border-color); }
        .rating-item.selected { background: var(--survey-border-color); color: var(--survey-button-text); border-color: var(--survey-border-color);}
        
        /* Chatbot Styles */
        .chat-container { border: 1px solid var(--survey-input-border); border-radius: 8px; overflow: hidden; display: flex; flex-direction: column; height: 400px; }
        .chat-messages { flex: 1; padding: 10px; overflow-y: auto; background-color: var(--survey-input-bg); }
        .chat-message { display: flex; margin-bottom: 10px; max-width: 80%; }
        .chat-message.user { margin-left: auto; flex-direction: row-reverse; }
        .chat-message .avatar { width: 30px; height: 30px; border-radius: 50%; margin: 0 10px; }
        .chat-message .text { padding: 10px; border-radius: 10px; }
        .chat-message.bot .text { background-color: #e9ecef; color: #333; }
        .chat-message.user .text { background-color: var(--survey-button-bg); color: var(--survey-button-text); }
        .chat-input-area { display: flex; border-top: 1px solid var(--survey-input-border); }
        .chat-input { flex: 1; border: none; padding: 12px; font-size: 14px; }
        .chat-send-btn { background: var(--survey-button-bg); color: var(--survey-button-text); border: none; padding: 0 15px; cursor: pointer; font-size: 18px; }
        .typing-indicator span { display: inline-block; width: 8px; height: 8px; border-radius: 50%; background-color: #aaa; margin: 0 2px; animation: typing 1s infinite; }
        .typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
        .typing-indicator span:nth-child(3) { animation-delay: 0.4s; }
        @keyframes typing { 0%, 60%, 100% { transform: translateY(0); } 30% { transform: translateY(-5px); } }

        .viewer-wrapper.a4-format { padding: 40px; background: #525659; }
        .viewer-wrapper.a4-format .viewer-container { max-width: unset; width: 210mm; min-height: 297mm; margin: 20px auto; padding: 20mm; }
        @media print { body, .viewer-wrapper.a4-format { background: #fff; } .viewer-wrapper.a4-format { padding: 0; } .viewer-wrapper.a4-format .viewer-container { margin: 0; box-shadow: none; border-radius: 0; } }

        #pdf-render-target {
            position: fixed;
            top: 0;
            left: -9999px; /* Keep it off-screen */
            z-index: -100;
            width: 210mm; /* A4 width */
            background: white;
            opacity: 0; /* Make it invisible */
            pointer-events: none; /* Not interactive */
        }
        body.pdf-rendering .demo-container { display: none; }
        #pdf-render-target .viewer-wrapper {
             font-family: 'Noto Sans Hebrew', var(--survey-font-family);
        }

        .btn { padding: 10px 20px; border: none; border-radius: 6px; cursor: pointer; font-weight: 500; transition: all 0.3s ease; }
        .btn-primary { background: var(--survey-button-bg); color: var(--survey-button-text); }
        .btn-secondary { background: #95a5a6; color: white; }
        .btn:hover { transform: translateY(-1px); }
        .btn:disabled { opacity: 0.7; cursor: wait; }
        .toolbar { padding: 15px 20px; background: #f8f9fa; border-bottom: 1px solid #e9ecef; display: flex; flex-wrap: wrap; gap: 10px; align-items: center; }
        .toolbar select, .toolbar label { padding: 6px 10px; border-radius: 4px; }
        .toolbar select { border: 1px solid #ced4da; }
        .toolbar label { border: none; }
        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: none; align-items: center; justify-content: center; z-index: 1000; }
        .modal-overlay.show { display: flex; }
        .modal { background: white; border-radius: 12px; padding: 20px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 1px solid #e9ecef; }
        .modal-title { font-size: 20px; font-weight: 600; }
        .close-btn { background: none; border: none; font-size: 24px; cursor: pointer; color: #6c757d; }
        .theme-editor { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; }
        .theme-editor .property-group { margin: 0; }
        .theme-editor .property-label { display: flex; align-items: center; justify-content: space-between; }
        .theme-editor input[type="color"] { width: 40px; height: 25px; padding: 2px; border: 1px solid #ccc; border-radius: 4px; }
        @media (max-width: 1200px) { .demo-container { flex-direction: column; height: auto; } .demo-panel { min-height: 500px; } }
        @media (max-width: 768px) { .creator-container { flex-direction: column; } .toolbox { width: 100%; height: 200px; } }